# FCT Miner environment example (extended for strategy)

# REQUIRED
PRIVATE_KEY=0x...        # Your wallet private key (use a fresh wallet)
NETWORK=sepolia          # Options: sepolia | mainnet

# Optional RPC overrides
# L1_RPC_URL=
# FACET_RPC_URL=
# RPC_URL=                     # Preferred Facet RPC for auto-trader (falls back to FACET_RPC_URL)

# --- Core miner (optional) ---
# GAS_PRICE_MULTIPLIER=1.5

# --- Automation (optional) ---
# AUTO_MODE=true
# AUTO_LOOP=true                # Keep running with interval checks
# SIZE_KB=100                   # 25 | 50 | 75 | 100
# SPEND_MODE=cap                # 'all' or 'cap'
# SPEND_CAP_ETH=0.00012         # Required if SPEND_MODE=cap
# CHECK_INTERVAL_SEC=60         # Polling / cooldown interval
# MAX_L1_GWEI=30                # Skip when L1 gas above this
# MAX_COST_PER_FCT_USD=0.00005  # Skip when estimated $/FCT is worse than this
# MIN_EFFICIENCY_PERCENT=90     # Skip when calldata efficiency below this
# MIN_BALANCE_ETH=0.01          # Keep at least this much ETH unspent
# STOP_ON_TX_FAIL=true          # Stop session on first tx failure

# --- New strategy module (GreedyHighRate) ---
# CLI mirrors these, but .env can provide defaults
RATE_FLOOR_WEI_PER_ETH=0
B_WAIT=40
U_WEAK=0.6
ALPHA=0.90
E_HIGH=0.9
PER_TX_KB=128
EFF_DEFAULT=0.995
MAX_PROGRESS=0.30
MIN_BLOCKS_LEFT=250
WEAK_PROGRESS=0.60
TARGET_DISCOUNT=0.20          # mine only if >=20% cheaper than market
MIN_ABS_EDGE_USD=50           # and at least $50 cheaper per FCT (USD/FCT)
BUDGET_ETH=0.02
LOOP_INTERVAL_MS=12000

# Optional advanced overrides
# EPOCH_BLOCKS=1200
# TARGET_FCT_WEI=            # if known (FCT-wei per epoch)
# MINTED_FCT_WEI=            # for dry-run simulation

# --- Auto Trader (sell FCT -> WETH on V2) ---
# All addresses must come from .env; no hardcoding
ROUTER=0x...
PAIR=0x180ef813f5c3c00e37b002dfe90035a8143ce233
TOKEN_FCT=0x...
TOKEN_WETH=0x...
FCT_DECIMALS=18
WETH_DECIMALS=18
ROUTER_WETH=               # 可选：若 Router.WETH() 视图无法读取，可手动指定 Router 认可的 WETH 地址覆盖

# Trading controls
SLIPPAGE_BPS=100            # 1.00%
TAKE_PROFIT=0.12            # 12% above WAC
MIN_TRADE_FCT=1000000000000000000  # 1 FCT (wei)
CHUNK_PCT=0.2               # 20% inventory per trade
DRY_RUN=true
LEDGER_PATH=./autotrader-ledger.json
POLL_MS=30000

# Test helpers
PRICE_OVERRIDE=
SMOKE_AMOUNT_FCT=1000000000000000  # 0.001 FCT

# --- Gas controls (optional) ---
# 让节点自动估算 gas（推荐在网络不稳定时开启）。开启后将忽略手动 gasPrice 设置。
USE_NODE_GAS=true
# 基于节点估算的乘数（默认 1.2）。仅在 USE_NODE_GAS 不是 true 时生效。
GAS_PRICE_MULTIPLIER=1.2
# gasPrice 地板（gwei），避免估得过低导致长时间 Pending。仅在 USE_NODE_GAS 不是 true 时生效。
GAS_PRICE_FLOOR_GWEI=1
# 授权等待超时（毫秒），默认 300000=5 分钟。
APPROVE_WAIT_MS=300000
# 授权回执超时后的额度轮询间隔（毫秒）。当回执长时间不返回时，通过轮询 allowance 观察授权是否生效。
ALLOWANCE_POLL_MS=3000

# Skip approve step (only if you know allowance is already sufficient)
SKIP_APPROVE=false
